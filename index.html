<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
	
		<title>Identifood</title>

		<!-- CSS from bootstrap -->
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="css/stylish-portfolio.css" rel="stylesheet">
		
		<!-- Custom Fonts -->
		<link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
		<link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
	</head>

	<body>
		<!-- Navigation -->
		<a id="nav" href="#instructions" class="btn btn-dark btn-lg toggle"><i class="fa fa-question-circle fa-stack-1x text-primary"></i></a>
		
		<!-- Header -->
		<header id="top" class="header">
			<div class="text-vertical-center">
				<h1>IDENTIFOOD</h1>
					<div class="input-group col-m-8 col-m-offset-2">
					  <span class="input-group-addon" id="sizing-addon2">url</span>
					  <input id="userinput" type="text" class="form-control" placeholder="Image" aria-describedby="sizing-addon2">
					</div>

					<br>
					<div class="btn-group" role="group" aria-label="...">
					  <button id="search" type="submit" class="btn btn-default" form="form1" onclick="pictureSearch()">Identify Food</button>
					</div>
			</div>
		</header>
			
		<!-- instructions -->
		<section id="instructions" class="instructions bg-primary">
			<div class="container">
				<div class="row text-center">
					<div class="col-lg-10 col-lg-offset-1">
						<h2>Instructions</h2>
						<hr class="small">
						<div class="row">
							<div class="col-md-3 col-sm-6">
								<div class="service-item">
									<span class="fa-stack fa-4x">
										<i class="fa fa-keyboard-o fa-stack-1x text-primary"></i>
									</span>
									<h4>
										<strong>Step 1</strong>
									</h4>
									<p>Type in the url of an image.</p>
								</div>
							</div>
							<div class="col-md-3 col-sm-6">
								<div class="service-item">
									<span class="fa-stack fa-4x">
									<i class="fa fa-location-arrow fa-stack-1x text-primary"></i>
								</span>
									<h4>
										<strong>Step 2</strong>
									</h4>
									<p>Click the "Identify Food" button.</p>
								</div>
							</div>
							<div class="col-md-3 col-sm-6">
								<div class="service-item">
									<span class="fa-stack fa-4x">
									<i class="fa fa-clock-o fa-stack-1x text-primary"></i>
								</span>
									<h4>
										<strong>Step 3</strong>
									</h4>
									<p>Wait for the result.</p>
								</div>
							</div>
							<div class="col-md-3 col-sm-6">
								<div class="service-item">
									<span class="fa-stack fa-4x">
									<i class="fa fa-repeat fa-stack-1x text-primary"></i>
								</span>
									<h4>
										<strong>Step 4</strong>
									</h4>
									<p>Look up another food starting at step 1.</p>
								</div>
							</div>
						</div>
						<!-- /.row (nested) -->
					</div>
					<!-- /.col-lg-10 -->
				</div>
				<!-- /.row -->
			</div>
			<!-- /.container -->
		</section>

		<!-- results -->
		<div id="results" class="pictureresults">
			<div>Results:</div>
			<div id="results-append"></div>
		</div>
		
		<!-- Footer -->
		<footer>
			<div class="container">
				<div class="row">
					<div class="col-lg-10 col-lg-offset-1 text-center">
						<h4><strong>Identifood</strong>
						</h4>
						<p>know your food</p>
						<hr class="small">
						<p class="text-muted">Copyright &copy; Identifood 2015</p>
					</div>
				</div>
			</div>
		</footer>

		<!-- jQuery -->
		<script src="js/jquery.js"></script>
		<!-- Bootstrap Core JavaScript -->
		<script src="js/bootstrap.min.js"></script>
		<script>

			function getPicInfo() {
				var userurl = document.getElementById("userinput").value;
				// alert(userurl);

			  $.ajax({
			  	dataType: 'json',
			    url: 'https://api.clarifai.com/v1/tag/',
			    type: 'GET',
			    beforeSend: function(xhr) {
			      xhr.setRequestHeader('Authorization', 'Bearer 7b9nddBbF6iv1vI1vdxLcjiBVtg5eW');
			    },
			    data: {
			      url: userurl
			    },
			    success: function (response) { 
			      console.log(response);
			      for(i = 0; i < response.results[0].result.tag.classes.length; i++) {
			      	console.log(response.results[0].result.tag.classes[i]);
			      	document.getElementById("results-append").innerHTML += response.results[0].result.tag.classes[i] + " ";

			      }

			    },
			    error: function (err) { 
			      console.log(err);
			    },
			  });
			}

			function pictureSearch(){
				console.log("button clicked");
				console.log(document.getElementById("userinput").value);
				getPicInfo();
			}

			// document.getElementById("search").onclick = ;




		</script>
	</body>
</html>
